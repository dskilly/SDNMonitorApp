<!-- templates/home.html-->
{% extends 'base.html' %}

{% block title %}Home{% endblock %}

{% block content %}
{% if user.is_authenticated %}

  {% load static from staticfiles %}

<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body {
  font-family: "Lato", sans-serif;

		background-image: url("{% static "/Background.webp" %}");
		background-repeat: no-repeat;
		background-attachment: fixed;
		background-position: center;
		background-size: cover;
	
}
#title{

  color: #f2f2f2;
  text-align: right;
  text-decoration: none;
  padding-right: 10px;
}
/*-----------Navbar Style -----*/
/* Style the navbar */
#navbar {
  overflow: hidden;
  background-color: #333;
}

/* Navbar links */
#navbar a {
  float: left;
  display: block;
  color: #f2f2f2;
  text-align: center;
  padding: 14px;
  text-decoration: none;
}

#navbar a:hover {
  background-color: #006cff;
  color: black;
}

#navbar a.active {
  background-color: #4CAF50;
  color: white;
}

/* Page content */
.content {
  padding: 16px;
}

/* The sticky class is added to the navbar with JS when it reaches its scroll position */
.sticky {
  position: fixed;
  top: 0;
  width: 100%;
}

/* Add some top padding to the page content to prevent sudden quick movement (as the navigation bar gets a new position at the top of the page (position:fixed and top:0) */
.sticky + .content {
  padding-top: 60px;
}


/*-----------END Navbar Style -----*/

.text-block {
  position: absolute;
  bottom: 20px;
  right: 20px;
  background-color: black;
  color: white;
  padding-left: 20px;
  padding-right: 20px;
}

/*-----------Graph Style---------*/
#Statchart_chart{
    margin-left: 20%;
	margin-right: 20%;
	position: inline-block;
	background-color: rgba(255,255,255,0.92);
	padding: 15px;
	text-align: center;

	}

</style>
</head>
<body>


<!-- Navbar -->
<div id="navbar">
  <a href="#"><img src={% static "/userico.png" %} class="block"> Welcome, {{ user.username }}</a>
  <a href="{% url 'topology_list' %}"><img src={% static "/dshbrdico.png" %} class="block"> Topology</a>
  <a href="{% url 'Appmonitorsite' %}"><img src={% static "/appconfigico.png" %} class="block"> Statistics</a>
  <a href="{% url 'admin:index' %}"><img src={% static "/siteconfico.png" %} class="block"> Admin Config</a>
  <a href="{% url 'logout' %}"><img src={% static "/logoutico.png" %} class="block"> Logout</a>
  <p id="title"> ╘PINGAS╛    SDN Monitoring App v 0.5
</div>
<!-- End of navbar -->
<br><br><br><br><br>
 
 
 
 <!-- Google Graph Maker --> 
 <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
  <script type="text/javascript">
    google.charts.load("current", {packages:['corechart']});
    google.charts.setOnLoadCallback(drawChart);
    function drawChart() {
      var data = google.visualization.arrayToDataTable([
        ["Node Name", "Total errors"],
		
        ["Copper", 8.94],
        ["Silver", 10.49],
        ["Gold", 19.30],
        ["Platinum", 21.45],
      ]);
	  /* 
		importedData[String,int] = *import from database the node name and tx_errors;
		for (i=0; i < {{ len(nodes) }}; i++...){
			data.addRows([   [{{ nodes.name }},{{ nodes.tx_errors}}]   ]);
		}
		
	  */

      var view = new google.visualization.DataView(data);
      view.setColumns([0, 1]);

      var options = {
        title: "Packet Errors per Device",
        width: 600,
        height: 400,
        bar: {groupWidth: "95%"},
        legend: { position: "none" },
      };
      var chart = new google.visualization.ColumnChart(document.getElementById("Statchart_chart"));
      chart.draw(view, options);
  }
  </script>
<div id="Statchart_chart" ></div>

<script>
//---------Navbar --------------------//
// When the user scrolls the page, execute myFunction 
window.onscroll = function() {myFunction()};

// Get the navbar
var navbar = document.getElementById("navbar");

// Get the offset position of the navbar
var sticky = navbar.offsetTop;

// Add the sticky class to the navbar when you reach its scroll position. Remove "sticky" when you leave the scroll position
function myFunction() {
  if (window.pageYOffset >= sticky) {
    navbar.classList.add("sticky")
  } else {
    navbar.classList.remove("sticky");
  }
}
//---------END Navbar --------------------//


</script>
   
</body>
</html> 
  

{% else %}
  <p>You are not logged in</p>
  <a href="{% url 'login' %}">login</a>
{% endif %}
{% endblock %}
